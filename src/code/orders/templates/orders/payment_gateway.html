{% extends 'core/base.html' %}

{% block title %}Secure Payment · AniPalengke{% endblock %}

{% block content %}
<div class="container" style="max-width: 500px; margin-top: 50px;">
    <div class="card">
        <div class="card-body">
            <div style="text-align: center; margin-bottom: 30px;">
                <h2 style="color: #4f46e5;">Secure Payment</h2>
                <p class="muted">Powered by MockPay (Stripe/PayMongo Simulation)</p>
            </div>

            <div style="background: #f9f9f9; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                    <span>Total Amount:</span>
                    <strong>₱{{ total|floatformat:2 }}</strong>
                </div>
                <div style="display: flex; justify-content: space-between;">
                    <span>Transaction ID:</span>
                    <span class="muted">{{ transaction_id }}</span>
                </div>
            </div>

            <form action="{% url 'process_payment' %}" method="post" id="payment-form">
                {% csrf_token %}
                <input type="hidden" name="order_data" value="{{ order_data_json }}">
                
                <div class="form-group">
                    <label class="label">Card Number</label>
                    <input type="text" class="input" placeholder="0000 0000 0000 0000" value="4242 4242 4242 4242">
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div class="form-group">
                        <label class="label">Expiry Date</label>
                        <input type="text" class="input" placeholder="MM/YY" value="12/25">
                    </div>
                    <div class="form-group">
                        <label class="label">CVC</label>
                        <input type="text" class="input" placeholder="123" value="123">
                    </div>
                </div>

                <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 20px; background: #4f46e5; border-color: #4f46e5;">
                    Pay ₱{{ total|floatformat:2 }}
                </button>
            </form>
            
            <div style="text-align: center; margin-top: 15px;">
                <a href="{% url 'checkout' %}" class="muted" style="font-size: 0.9rem;">Cancel Payment</a>
            </div>
        </div>
    </div>
</div>

<script>
    document.getElementById('payment-form').addEventListener('submit', function(e) {
        const btn = this.querySelector('button');
        btn.innerHTML = 'Processing...';
        btn.disabled = true;
    });
</script>
{% endblock %}
